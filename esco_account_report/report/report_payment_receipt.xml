<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="esco_report_payment_receipt_document">
        <t t-call="esco_account_report.external_layout_bait">
            <style>

            </style>
            <t t-set="o" t-value="o.with_context(lang=o.env.lang or o.partner_id.lang)"/>
<!--            <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)"/>-->
            <div class="page page_margin" style="font-family: Frutiger_Roman; font-size: 17px;">
                <t t-if="o.partner_type == 'customer'">
                    <h3><strong class="bold_header">Cash Receipt Voucher</strong></h3>
                </t>
                <t t-if="o.partner_type == 'supplier'">
                    <h3><strong class="bold_header">Payment Voucher</strong></h3>
                </t>
                <div class="row" style="width: 100%; margin-right: 20px;">
                    <table style="width: 70%; border-collapse: collapse; margin-left: 2%;border: none; table-layout: fixed;">
                        <tr>
                            <td style="width:25%;">
                                <span>Document No.</span>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border">
                                <span t-field="o.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:25%;">
                                <span>Date</span>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border">
                                <span t-field="o.date"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:25%;">
                                <t t-if="o.partner_type == 'customer'">
                                    <span>Customer </span>
                                </t>
                                <t t-if="o.partner_type == 'supplier'">
                                    <span>Vendor </span>
                                </t>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border">
                                <span t-field="o.partner_id"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:25%;">
                                <t t-if="o.partner_type == 'customer'">
                                    <span>Customer ID </span>
                                </t>
                                <t t-if="o.partner_type == 'supplier'">
                                    <span>Vendor ID </span>
                                </t>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border">
                                <span t-field="o.partner_id.id"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:25%;">
                                <span>Amount</span>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border">
                                <span t-field="o.amount" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width:25%;">
                                <span>Written Amount </span>
                            </td>
                            <td style="width:75%;" class="text-center top_border left_border right_border bottom_border">
                                <span t-esc="o.company_id.get_amount_in_words(o.amount, o.currency_id, lang)"/>
                            </td>
                        </tr>
                    </table>
                    <div style="width: 20%; margin-left:10%; text-align: right; ">
                        <span>Payment: </span> <span t-field="o.journal_id.name"/>
                    </div>
                </div>
                <br/><br/><br/>
                <table class="table table-sm table_with_header" style="border-collapse: collapse;">
                    <thead style="background-color: #30378c !important; color: white;">
                        <tr t-if="o.payment_type == 'inbound'" style="color: white;">
                            <td class="table_header text-center"><span>INV. Date</span></td>
                            <td class="table_header text-center"><span>INV. No.</span></td>
                            <td class="table_header text-center"><span> Amount </span></td>
                            <td class="table_header text-center"><span>Received Amount</span></td>
<!--                            <td class="table_header text-center"><span>Discount Amount</span></td>-->
                            <td class="table_header text-center" style="background-color: #30378c !important;"><span>Balance</span></td>
                        </tr>
                        <tr t-if="o.payment_type == 'outbound'" style="color: white;">
                            <td class="table_header text-center"><span>Bill Date</span></td>
                            <td class="table_header text-center"><span>Bill No.</span></td>
                            <td class="table_header text-center"><span> Amount </span></td>
                            <td class="table_header text-center"><span>Paid Amount</span></td>
<!--                            <td class="table_header text-center"><span>Discount Amount</span></td>-->
                            <td class="table_header text-center" style="background-color: #30378c !important;"><span>Balance</span></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="o.reconciled_invoice_ids" t-as="inv">
                            <td class="text-center"><span t-field="inv.invoice_date"/></td>
                            <td class="text-center"><span t-field="inv.name"/></td>
                            <td class="text-center"><span t-field="inv.amount_total"/></td>
<!--                            <td class="text-center"><span t-field="o.amount"/></td>-->
                            <td class="text-center"><span t-esc="o.get_cash_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>
<!--                            <td class="text-center"><span t-esc="o._get_invoice_payment_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>-->
<!--                            <td class="text-center"><span t-esc="o.get_discount_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>-->
                            <td class="text-center" style="background-color: white !important;"><span t-field="inv.amount_residual"/></td>
                        </tr>
                        <tr t-foreach="o.reconciled_bill_ids" t-as="inv">
                            <td class="text-center"><span t-field="inv.invoice_date"/></td>
                            <td class="text-center"><span t-field="inv.name"/></td>
                            <td class="text-center"><span t-field="inv.amount_total"/></td>
<!--                            <td class="text-center"><span t-field="o.amount"/></td>-->
                            <td class="text-center"><span t-esc="o.get_cash_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>
<!--                            <td class="text-center"><span t-esc="o._get_invoice_payment_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>-->
<!--                            <td class="text-center"><span t-esc="o.get_discount_amount(inv)" t-options="{'widget': 'monetary', 'display_currency': inv.currency_id}"/></td>-->
                            <td class="text-center" style="background-color: white !important;"><span t-field="inv.amount_residual"/></td>
                        </tr>
                    </tbody>
                </table>
                <br/>
                <div style="margin-top: 230px;" class="bold_sub_header">Notes</div>
                <div style="width: 100%;height: 100px;border: 1px solid grey;">
                    <span t-field="o.ref" style=" margin-top: 10px; margin-left: 10px; margin-right: 10px;"/>
<!--                    -->
                </div>
                <t t-if="o.payment_type == 'inbound'">
                    <div class="text-center row col-12"
                         style="margin-left:5mm;margin-right:5mm;margin-top: 0px; font-size: 16px;">
    <!--                    <div class="col-4" style="">-->
    <!--                        <div style="height:60px; min-height:60px; margin-top: -30px;">-->
    <!--                        </div>-->
    <!--                        <span>Recipient Signature</span>-->
    <!--                        <hr style="border-top: 1px solid black;"/>-->
    <!--                    </div>-->

                        <div class="col-4" style="margin-top: 40px;">
                            <div style="height:140px; min-height:140px;">
                                <img t-if="o.create_uid.signature_image" t-att-src="image_data_uri(o.create_uid.signature_image)"
                                         alt="Signature" style="height:140px;width:280px; margin-top: -50px;"/>
                            </div>
                            <hr style="border-color: black; margin-top: -80px;"/>
                            <span t-field="o.create_uid"/>
                        </div>
                        <div class="col-4">
                        </div>
                    </div>
                </t>
                <t t-if="o.payment_type == 'outbound'">
                    <div class="text-center row col-12"
                         style="margin-left:5mm;margin-right:5mm;margin-top: 0px; font-size: 16px;">
                        <div class="col-4" style="">
                            <div style="height:60px; min-height:60px; margin-top: -30px;">
                            </div>
                            <span>Recipient Signature</span>
                            <hr style="border-top: 1px solid black;"/>
                        </div>
                        <div class="col-4">
                        </div>
                        <div class="col-4" style="margin-top: 40px;">
                            <div style="height:140px; min-height:140px;">
                                <img t-if="o.create_uid.signature_image" t-att-src="image_data_uri(o.create_uid.signature_image)"
                                         alt="Signature" style="height:140px;width:280px; margin-top: -50px;"/>
                            </div>
                            <hr style="border-color: black; margin-top: -80px;"/>
                            <span t-field="o.create_uid"/>
                        </div>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <template id="account.report_payment_receipt">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang or o.company_id.partner_id.lang"/>
                <t t-call="esco_account_report.esco_report_payment_receipt_document"/>
            </t>
        </t>
    </template>

</odoo>
